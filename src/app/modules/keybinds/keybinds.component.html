<div class="flex w-full flex-auto flex-col">

    <mat-drawer-container class="h-full">

        <mat-drawer #drawer class="h-full w-64" mode="side" [(opened)]="opened">
            <keybinds-drawer (keybindingSelected)="onKeybindingSelected($event)"></keybinds-drawer>
        </mat-drawer>
        <div class="mx-auto flex w-full flex-wrap pb-4">
            <div class="flex flex-row w-full justify-between items-center py-2 ml-6">
                <div class="text-3xl font-semibold leading-8 tracking-tight">
                    Keybindings
                </div>
                <div class="ml-6 pr-4 flex">

                    <button class="hidden sm:inline-flex" mat-stroked-button [disabled]="!keybindingSelected"
                        (click)="deleteKeybinding()">
                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:cog-8-tooth'"></mat-icon>
                        <span class="ml-2">Delete</span>
                    </button>
                    <button class="ml-3 hidden sm:inline-flex" mat-stroked-button [disabled]="!keybindingSelected"
                        (click)="saveKeybinding()">
                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:cog-8-tooth'"></mat-icon>
                        <span class="ml-2">Save</span>
                    </button>
                    <button class="ml-3 hidden sm:inline-flex" mat-flat-button [color]="'primary'"
                        [disabled]="!keybindingSelected" (click)="shareKeybinding()">
                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:arrow-up-tray'"></mat-icon>
                        <span class="ml-2">Share</span>
                    </button>

                    <!-- Actions menu (visible on xs) -->
                    <div class="sm:hidden">
                        <button [matMenuTriggerFor]="actionsMenu" mat-icon-button>
                            <mat-icon [svgIcon]="'heroicons_outline:ellipsis-vertical'"></mat-icon>
                        </button>
                        <mat-menu #actionsMenu="matMenu">
                            <button mat-menu-item>Delete</button>
                            <button mat-menu-item>Save</button>
                            <button mat-menu-item>Share</button>
                        </mat-menu>
                    </div>
                </div>
            </div>

            <div class="flex w-full mx-4">
                <div class="flex flex-0 max-h-10 min-h-10">
                    <button class="hidden sm:inline-flex" mat-stroked-button (click)="drawer.toggle()">
                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:cog-8-tooth'"></mat-icon>
                        <span class="ml-2">Show List</span>
                    </button>
                    @if (selectedKeybinding) {
                    <div class="flex flex-1 items-center flex-row">
                        <p class="px-2">Viewing: </p>
                        @if(!editingName) {
                        {{ selectedKeybindingName }}
                        <div class="px-2">
                            <button class="hidden sm:inline-flex" mat-stroked-button (click)="editName()">
                                <span>Edit</span>
                            </button>
                        </div>
                        }
                        @if(editingName) {
                        <div>
                            <form [formGroup]="nameForm" (ngSubmit)="saveName()">
                                <mat-form-field class="w-80 px-2">
                                    <!-- <mat-label>Name</mat-label> -->
                                    <input matInput formControlName="name" placeholder="Enter a name" maxlength="32">
                                </mat-form-field>
                                <button type="submit" class="hidden sm:inline-flex mr-2" mat-stroked-button
                                    [disabled]="nameForm.invalid">
                                    <span> Save </span>
                                </button>
                                <button type="button" class="hidden sm:inline-flex" mat-stroked-button
                                    (click)="cancelName()">
                                    <span>Cancel</span>
                                </button>
                            </form>
                        </div>
                        }
                    </div>
                    }
                    <!-- @if (!selectedKeybind) {
                    <div class="flex items-center">
                        Viewing: New
                    </div>
                    } -->

                </div>

            </div>
        </div>
        <div class="flex w-full bg-gray-300 max-h-24 min-h-20">
            <abilities [keybindingSelected]="keybindingSelected" [selectedKeybinding]="selectedKeybinding">
            </abilities>
        </div>
        <keyboard></keyboard>
    </mat-drawer-container>
</div>
